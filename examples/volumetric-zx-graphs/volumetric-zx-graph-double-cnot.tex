\documentclass[tikz, preview, border=1pt]{standalone}

\input{../../tikz-volumetric-zx-graph.tex}

%A spider with at most four legs must have all its leg in the same plane (X, Y or Z)

%\sc Minimal length of path connecting:
%\begin{itemize}
%	\item Two adjacent spiders of the same color lying in the same plane : 1
%	\item Two adjacent spiders of different colors lying in the same plane : 3
%\end{itemize}

% Assigning plane constraints may increase the Manhattan Distance between two spiders
% This means they are not adjacent in 3D and require a sequence of edges to connect them.

\begin{document}
	% Double-CNOT
	\ZXGraph[labels=show]{
		\Node[type=O, identifier=B1]{(0, 0)}
		\Node[type=O, identifier=B2]{(0,-1)}

		\Node[type=O, identifier=B3]{(3, 0)}
		\Node[type=O, identifier=B4]{(3,-1)}

		\Node[type=X, identifier=X1]{(1,-1)}
		\Node[type=Z, identifier=Z1]{(1, 0)}

		\Node[type=Z, identifier=Z2]{(2,-1)}
		\Node[type=X, identifier=X2]{(2, 0)}

		\Edge{B1}{Z1}
		\Edge{X1}{Z2}
		\Edge{Z2}{B4}

		\Edge{B2}{X1}
		\Edge{Z1}{X2}
		\Edge{X2}{B3}

		\Edge{X1}{Z1}
		\Edge{Z2}{X2}
	}

	% Double-CNOT (w. initial plane constraints)
	\ZXGraph[labels=show]{
		\Node[type=O, identifier=B1]{(+1,+1)}
		\Node[type=O, identifier=B2]{( 0,-1)}

		\Node[type=O, identifier=B3]{(+2.6,+1.6)}
		\Node[type=O, identifier=B4]{(+3,-1)}

		\Node[type=Z, plane=Y, identifier=Z1]{(+1, 0)}
		\Node[type=X, plane=X, identifier=X1]{(+1,-1)}

		\Node[type=Z, plane=Z, identifier=Z2]{(+2,-1)}
		\Node[type=X, plane=Z, identifier=X2]{(+1.8,+0.8)}

		\Edge[axis=Z]{B1}{Z1}
		\Edge[axis=Y]{X1}{Z2}
		\Edge[axis=Y]{Z2}{B4}

		\Edge[axis=Y]{B2}{X1}
		\Edge[axis=X]{Z1}{X2}
		\Edge[axis=X]{X2}{B3}

		\Edge[axis=Z]{X1}{Z1}
		\Edge[axis=U]{Z2}{X2}

		% Given the colors and planes assigned to X1, Z1 and Z2, the shortest path between spiders Z2 and X2
		% has a Manhattan Distance of at least 3, which means two extra spiders are needed.
		\Edge[axis=U]{Z2}{X2}
	}

	% Double-CNOT (w. initial plane constraints)
	\ZXGraph[labels=show]{
		\Node[type=O, identifier=B1]{(+1,+1)}
		\Node[type=O, identifier=B2]{( 0,-1)}

		\Node[type=O, identifier=B3]{(+2.6,+1.6)}
		\Node[type=O, identifier=B4]{(+3,-1)}

		\Node[type=Z, plane=Y, identifier=Z1]{(+1, 0)}
		\Node[type=X, plane=X, identifier=X1]{(+1,-1)}

		\Node[type=Z, plane=Z, identifier=Z2]{(+2,-1)}
		\Node[type=X, plane=Z, identifier=X2]{(+1.8,+0.8)}

		\Edge[axis=Z]{B1}{Z1}
		\Edge[axis=Y]{X1}{Z2}
		\Edge[axis=Y]{Z2}{B4}

		\Edge[axis=Y]{B2}{X1}
		\Edge[axis=X]{Z1}{X2}
		\Edge[axis=X]{X2}{B3}

		\Edge[axis=Z]{X1}{Z1}

		% The colours of the two extra spiders (i.e. E1, E2) can be inferred from the plane constraints
		% along with the colours of their respective neighbour.
		\Node[type=X, plane=X, identifier=E1]{(+2.8,+0.8)}
		\Node[type=Z, plane=Y, identifier=E2]{(+2.8,-0.2)}

		\Edge[axis=Y]{X2}{E1}
		\Edge[axis=Z]{E1}{E2}
		\Edge[axis=X]{E2}{Z2}
	}

\end{document}